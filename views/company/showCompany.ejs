<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/showCompany.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script  src="/js/jquery.js"></script> 
    <script src="/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.1/axios.min.js"></script>
</head>
<body>
  <%- include('../partials/navbar')  %>

      <div class="d-flex justify-content-center mt-5">
       <h1> <%= company.name %> (<%= company.role %>) </h1>
      </div>
      
      <div class="row d-flex justify-content-center mt-3">
        <div class="col-8">
        <%- company.description %>
      </div>
      </div>


    
       <div class="row">

        <div class="col-8" style="border: 2px solid black">
           

            <% for(let round of company.rounds){ %>
            <div class  = "studentList">

            <% const attributes = Object.keys(round.selectedStudents[0]) %>    

            <div>
               <% for(let attribute of attributes){ %>
                    <div class = "attributesDiv"> <%= attribute %> </div>
               <% } %>
            </div>    

            <div >
            <% for(let student of round.selectedStudents){ %>
                <div>
                    <% for(let data of Object.values(student)){ %>
                         <div class = "valuesDiv"> <%= data %> </div>
                    <% } %>
                 </div> 
             <% } %> 
            </div>

            </div>
            <% } %>

            <a href="/company/<%=company._id%>/addRound"><button id = "random">Add Round</button></a>  

        </div>


        <div class="col-4" style="border: 2px solid black">
            Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptatem distinctio, quos cupiditate impedit ea ipsa consectetur harum id quia reiciendis deleniti ut suscipit, dolores temporibus sint provident, unde minima saepe.
        </div>

       </div>




     <div id="commentArea">  


      <div class="mt-2" style="border-bottom: 1px solid #d2d1d1; height: 2.2em; background-color: #f7f7f7;">
        <div class="mx-3" style="font-family: 'Segoe UI';  color: #00000093; font-size: 14px; font-weight: 500;"> Comments <%=company.comments.length%> </div> 
      </div>


    <div class="entry mt-3 mx-3"  >
        <form action="/company/<%=company._id%>/comment" method="POST">
          <textarea name="content" rows="3" id="commentContent" placeholder="Type comment here..."></textarea>
       
          <div class="d-flex justify-content-end mt-1" style="height: 2.5em;">
            <button class="btn btn-secondary btn-sm " >Comment</button>
          </div>
        </form>
    
    
    
    <div style="margin-top:4em;">
    <% for(let comment of company.comments){ %> 
    
        <div class="mt-5 mb-5 pb-2" style=" border-left: 3px solid #d2d1d1; padding-left: 1em; ">
          <div class="row " style=""> 
             <div class="col-9 pt-1" id="commentAuthor" > <b> <%= comment.name %> </b>, <%=comment.publishDate%>  </div>
          </div>
    
        <div class="mt-1" id="commentBody"><%= comment.content %></div>  
        </div>
        
      <% } %>
      
      <div style="height: 1px; border: 1px solid rgb(250,250,250);;"></div>
    </div>   
      
     </div>
     

    </div>


 

</body>
</html>

<script>
    


   axios.get(`/company/<%-company._id%>/studentApi`)
   

</script>




